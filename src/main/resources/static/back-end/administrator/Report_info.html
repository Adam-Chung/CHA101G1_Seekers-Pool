<!DOCTYPE html>
<html>

<head>
<title>Table Data</title>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
td {
	border: 1px solid black;
	text-align: center;
}
</style>
</head>

<body>
	memId:<input type="text" id="memId" name="memId"><br>
	email: <input type="text" id="email" name="email"><br>
	phoneNumber: <input type="text" id="phoneNumber" name="phoneNumber"><br>
	comMemId: <input type="text" id="comMemId" name="comMemId"><br> 
	message: <input type="text" id="message" name="message"><br>
	<input type="button" id="submitButton" value="Submit">
	<button id="loadButton">Load Table</button>
	<div id="tableContainer">

		<table>
			<tbody id="tablebody">
				<!-- 表格預設的靜態內容 -->
				<tr>
					<td>memId</td>
					<td>email</td>
					<td>phoneNumber</td>
					<td>comMemId</td>
					<td>message</td>
				</tr>
				<tr>
					<td>行2列1</td>
					<td>行2列2</td>
					<td>行2列3</td>
					<td>行2列4</td>
					<td>行2列5</td>
				</tr>
				<tr>
					<td>行3列1</td>
					<td>行3列2</td>
					<td>行3列3</td>
					<td>行3列4</td>
					<td>行3列5</td>
				</tr>
				<tr>
					<td>行4列1</td>
					<td>行4列2</td>
					<td>行4列3</td>
					<td>行4列4</td>
					<td>行4列5</td>
				</tr>
				<tr>
					<td>行5列1</td>
					<td>行5列2</td>
					<td>行5列3</td>
					<td>行5列4</td>
					<td>行5列5</td>
				</tr>
			</tbody>
		</table>
	</div>
	<script>
	$(document).ready(function() {
		$("#loadButton").click(function() {
			loadData();
		});

		function loadData() {
			$.ajax({
				url: "../../ReportEnterpriseInfoShow",
				type: "GET",
				dataType: "json",
				success: function(data) {
					// 检查返回的JSON数据是否为空
					if (data.length > 0) {
						// 清空表格
						$("#tablebody").empty();

						// 将数据填充到表格中
						$.each(data, function(index, item) {
							var row = "<tr>";
							row += "<td>" + item.memId + "</td>";
							row += "<td>" + item.email + "</td>";
							row += "<td>" + item.phoneNumber + "</td>";
							row += "<td>" + item.comMemId + "</td>";
							row += "<td>" + item.message + "</td>";
							row += "</tr>";
							$("#tablebody").append(row);
						});
					}
				},
				error: function(xhr, status, error) {
					console.log("Error: " + error);
				}
			});
		}
		
		// 点击提交按钮
	    $("#submitButton").click(function() {
	        // 收集输入字段的值
	        var memId = $("#memId").val();
	        var email = $("#email").val();
	        var phoneNumber = $("#phoneNumber").val();
	        var comMemId = $("#comMemId").val();
	        var message = $("#message").val(); 

	        // 创建一个包含输入数据的JavaScript对象
	        var data = {
	            memId: memId,
	            email: email,
	            phoneNumber: phoneNumber,
	            comMemId: comMemId,
	            message: message
	        };

	        // 使用AJAX请求将数据发送到服务器
	        $.ajax({
	            url: "../../ReportEnterpriseInfoSave",
	            type: "POST",
	            dataType: "json",
	            data: JSON.stringify(data), // 将数据转换为JSON字符串
	            contentType: "application/json; charset=utf-8",
	            success: function(response) {
	                // 处理服务器的响应
	                console.log("Data saved successfully!");
	                // 清空输入字段
	                $("#memId").val("");
	                $("#email").val("");
	                $("#phoneNumber").val("");
	                $("#comMemId").val("");
	                $("#message").val("");
	            },
	            error: function(xhr, status, error) {
	                console.log("Error: " + error);
	            }
	        });
	    });
	});
	</script>
</body>

</html>